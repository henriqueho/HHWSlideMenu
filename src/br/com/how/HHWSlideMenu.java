package br.com.how;import java.util.ArrayList;import java.util.List;import br.com.how.hhwslidemenu.R;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.graphics.drawable.Drawable;import android.os.Bundle;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentActivity;import android.support.v4.app.FragmentManager;import android.support.v4.app.FragmentTransaction;import android.support.v4.view.GravityCompat;import android.support.v4.widget.DrawerLayout;import android.support.v7.app.ActionBarDrawerToggle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ArrayAdapter;import android.widget.ImageView;import android.widget.ListView;import android.widget.RelativeLayout;import android.widget.TextView;public class HHWSlideMenu {	public final int STARTPAGE = 0;	private List<MenuItemObject> menuItemsObjects;	Activity activity;	public DrawerLayout mDrawerLayout;	ListView mDrawerList;	RelativeLayout mDrawerContent;	public ActionBarDrawerToggle mDrawerToggle;	private void setMenuItemsObjects() {		menuItemsObjects = new ArrayList<MenuItemObject>();		DefaultFragment fragment = new DefaultFragment();		Bundle args = new Bundle();		args.putString(fragment.ARGS_CONTEUDO_TESTE, "Tela Inicial");		fragment.setArguments(args);		menuItemsObjects.add(new MenuItemObject("In√≠cio", fragment, activity				.getResources().getDrawable(R.drawable.ic_launcher)));		menuItemsObjects.add(new MenuItemObject("Tela 2", fragment				.newInstance("Tela 2")));		menuItemsObjects.add(new MenuItemObject("Tela 3", fragment				.newInstance("Tela 3")));	}	public HHWSlideMenu(Activity activity) {		this.activity = activity;		mDrawerLayout = (DrawerLayout) activity				.findViewById(R.id.drawer_layout);		mDrawerList = (ListView) activity.findViewById(R.id.left_drawer);		mDrawerLayout.setDrawerShadow(R.drawable.drawer_shadow,				GravityCompat.START);		mDrawerContent = (RelativeLayout) activity				.findViewById(R.id.drawer_content);		setMenuItemsObjects();		MenuAdapter adapter = new MenuAdapter(activity, menuItemsObjects);		mDrawerList.setAdapter(adapter);		// mDrawerList.setSelector(R.color.blue_light);		setIconMenu();	}	public void openItemMenu(int position) {		FragmentManager fm = ((FragmentActivity) activity)				.getSupportFragmentManager();		FragmentTransaction ft = fm.beginTransaction();		if (position != STARTPAGE) {			ft.addToBackStack(null);		}		MenuItemObject item = menuItemsObjects.get(position);		if (item.isFragment) {			mDrawerLayout.closeDrawers();			ft.replace(R.id.content_frame, item.fragmentClass).commit();		} else {			Intent intent = new Intent(activity, (Class<?>) item.activityClass);			activity.startActivity(intent);		}	}	private void setIconMenu() {		mDrawerToggle = new ActionBarDrawerToggle(activity, /* host Activity */		mDrawerLayout, /* DrawerLayout object */		R.string.drawer_open, /* "open drawer" description for accessibility */		R.string.drawer_close /* "close drawer" description for accessibility */		) {			/** Called when a drawer has settled in a completely closed state. */			public void onDrawerClosed(View view) {				// ((MainActivity)				// activity).getSupportActionBar().setIcon(R.drawable.ic_menu);			}			/** Called when a drawer has settled in a completely open state. */			public void onDrawerOpened(View drawerView) {				// ((MainActivity)				// activity).getSupportActionBar().setIcon(R.drawable.ic_launcher);			}		};		mDrawerLayout.setDrawerListener(mDrawerToggle);	}	public boolean isDrawerLayoutOpen() {		return mDrawerLayout.isDrawerOpen(mDrawerContent);	}	// private void createMenu() {	// menuItens = new ArrayList<MenuItem>();	// for(MenuItemObject item : menuItemsObjects) {	// String menuName = item.itemName;	// Drawable icon = item.icon;	// menuItens.add(new MenuItem(menuName, icon));	// }	// }	// TesteFragment teste = new TesteFragment();	// Bundle args = new Bundle();	// args.putString(teste.ARGS_CONTEUDO_TESTE, "teste");	// teste.setArguments(args);	public Fragment getStartFragment() {		return menuItemsObjects.get(STARTPAGE).fragmentClass;	}	public class MenuItemObject {		public String itemName;		public Drawable icon;		public Object activityClass;		public Fragment fragmentClass;		public boolean isFragment;		public MenuItemObject(String name, Object activityClass, Drawable icon) {			this.itemName = name;			this.icon = icon;			this.activityClass = activityClass;			this.fragmentClass = null;			this.isFragment = false;		}		public MenuItemObject(String name, Fragment fragment, Drawable icon) {			this.itemName = name;			this.icon = icon;			this.activityClass = null;			this.fragmentClass = fragment;			this.isFragment = true;		}		public MenuItemObject(String name, Object activityClass) {			this.itemName = name;			this.icon = activity.getResources().getDrawable(					R.drawable.ic_launcher);			this.activityClass = activityClass;			this.fragmentClass = null;			this.isFragment = false;		}		public MenuItemObject(String name, Fragment fragment) {			this.itemName = name;			this.icon = activity.getResources().getDrawable(					R.drawable.ic_launcher);			this.activityClass = null;			this.fragmentClass = fragment;			this.isFragment = true;		}	}	public class MenuAdapter extends ArrayAdapter<MenuItemObject> {		private List<MenuItemObject> menuItens;		public MenuAdapter(Context context, List<MenuItemObject> itens) {			super(context, 0);			menuItens = itens;		}		@Override		public int getCount() {			return menuItens.size();		}		@Override		public View getView(final int position, View convertView,				ViewGroup parent) {			View v = convertView;			final CompleteListViewHolder viewHolder;			if (convertView == null) {				ViewGroup noRootView = null;				LayoutInflater li = (LayoutInflater) getContext()						.getSystemService(Context.LAYOUT_INFLATER_SERVICE);				v = li.inflate(R.layout.item_list_menu, noRootView);				viewHolder = new CompleteListViewHolder(v);				v.setTag(viewHolder);				v.setOnClickListener(new View.OnClickListener() {					@Override					public void onClick(View view) {						// CompleteListViewHolder viewCompleteListViewHolder =						// (CompleteListViewHolder) view						// .getTag();						openItemMenu(position);					}				});			} else {				viewHolder = (CompleteListViewHolder) v.getTag();			}			MenuItemObject menuItem = menuItens.get(position);			viewHolder.icon.setImageDrawable(menuItem.icon);			viewHolder.label.setText(menuItem.itemName);			return v;		}		class CompleteListViewHolder {			public ImageView icon;			public TextView label;			public CompleteListViewHolder(View base) {				icon = (ImageView) base						.findViewById(R.id.item_list_hhwslidemenu_icon);				label = (TextView) base						.findViewById(R.id.item_list_hhwslidemenu_name);			}		}	}}